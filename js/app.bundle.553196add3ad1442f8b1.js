(()=>{let t=document.getElementById("canvas"),e=t.getContext("2d"),l=t.getBoundingClientRect(),n=["#4988FE","#22D3AA","#00b33c","#99cc00","#4944FE"],i=[Math.PI/4,Math.PI/4*3,Math.PI/6,Math.PI/2,Math.PI/3],o=[],a=null;function r(){o=[];let t=i.length,l=0;for(let a=0;a<t;a++){let t=n[a],r=i[a]/2+l,c=i[a]+l,f=200*Math.sin(r),h=200*Math.cos(r),s=220*Math.sin(r),u=220*Math.cos(r);e.beginPath(),e.lineCap="round",e.moveTo(h+300,f+300),e.lineTo(u+300,s+300);let d="当前下标 "+a;e.fillStyle=t,e.font="100 20px",r>3*Math.PI/2||r<Math.PI/2?e.textAlign="left":e.textAlign="right",h>=0?(e.lineTo(u+315,s+300),e.fillText(d,u+320,s+300)):(e.lineTo(u+285,s+300),e.fillText(d,u+280,s+300)),e.strokeStyle=t,e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(300,300),e.arc(300,300,200,l,c,!1),e.fill(),l=c,o[a]=c}}function c(l,i){e.clearRect(0,0,t.width,t.height),r(),e.beginPath(),e.moveTo(300,300),e.fillStyle=n[l],e.arc(300,300,210,o[l-1]||0,o[l],!1),e.fill()}r(),t.addEventListener("mousemove",(function(i){i.preventDefault(),function(i){let r=i.clientX-l.x,f=i.clientY-l.y;if(Math.pow(r-300,2)+Math.pow(f-300,2)<Math.pow(200,2)){"pointer"!==t.style.cursor&&(t.style.cursor="pointer");let h=Math.atan2(f-300,r-300);h=h>=0?h:h+2*Math.PI;let s=function(t){let e=o.length;for(let l=0;l<e-1;l++)if(o[l]>=t&&t<o[l+1])return l;return e-1}(h);a=s,c(a),function(t){let i=t.clientX-l.x,o=t.clientY-l.y;e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(i+10,o+10,90,30),e.lineWidth=1,e.strokeStyle="#ff704d",e.strokeRect(i+9.5,o+9.5,90,30),e.fillStyle=n[a],e.font="30px",e.fillText("区域下标  "+a,i+20,o+28)}(i)}else"pointer"===t.style.cursor&&(t.style.cursor="default"),a>=0&&(c(a),a=null)}(i)})),window.addEventListener("resize",(function(){l=t.getBoundingClientRect()}))})();